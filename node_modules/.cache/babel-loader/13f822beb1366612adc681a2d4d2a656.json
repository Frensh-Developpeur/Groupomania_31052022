{"ast":null,"code":"import \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'loginPage',\n  data: function data() {\n    return {\n      mail: 'Adresse email',\n      password: 'Mot de passe',\n      affichMdp: 'Aperçu du mot de passe',\n      messageMdp: '',\n      numberAffichMsg: true,\n      validLogin: null,\n      buttonLogin: false,\n      regexpBoolMail: null,\n      regexpBoolPassword: null,\n      passwordRegExp: new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})\"),\n      emailRegExp: new RegExp(/^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/i),\n      connexionUser: false\n    };\n  },\n  methods: {\n    affichMsgConf: function affichMsgConf() {\n      if (this.numberAffichMsg === false) {\n        this.numberAffichMsg = true;\n        document.getElementById('password-login').setAttribute(\"type\", \"password\");\n      } else {\n        this.numberAffichMsg = false;\n        document.getElementById('password-login').setAttribute(\"type\", \"text\");\n      }\n    },\n    onEnter: function onEnter() {\n      var mailLogin = document.getElementById('email-login');\n      var passwordLogin = document.getElementById('password-login');\n      if (this.emailRegExp.test(mailLogin.value.trim()) ? this.regexpBoolMail = true : this.regexpBoolMail = false) ;\n      if (this.passwordRegExp.test(passwordLogin.value.trim()) ? this.regexpBoolPassword = true : this.regexpBoolPassword = false) ;\n\n      if (this.regexpBoolMail === true && this.regexpBoolPassword === true) {\n        this.buttonLogin = true;\n      }\n    },\n    checkLogin: function checkLogin() {\n      var _this = this;\n\n      if (this.regexpBoolMail === true || this.regexpBoolPassword === true) {\n        var loginCheck = {\n          Email: document.querySelector('#email-login').value,\n          Password: document.querySelector('#password-login').value\n        };\n        fetch('http://localhost:3000/api/auth/login', {\n          method: \"POST\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify(loginCheck)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (login) {\n          if (login.userId === undefined) {\n            _this.validLogin = false;\n            setTimeout(function () {\n              _this.validLogin = null;\n              return false;\n            }, 3000);\n          } else {\n            _this.validLogin = true;\n            setTimeout(function () {\n              window.location.assign(\"http://localhost:8080/fil\");\n              sessionStorage.setItem('user', JSON.stringify(login));\n              location.reload();\n            }, 2000);\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACAA,mBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,2BADA;AAEAC,8BAFA;AAGAC,yCAHA;AAIAC,oBAJA;AAKAC,2BALA;AAMAC,sBANA;AAOAC,wBAPA;AASAC,0BATA;AAUAC,8BAVA;AAYAC,+FAZA;AAaAC,gEAbA;AAeAC;AAfA;AAiBA,GApBA;AAqBAC;AACAC,iBADA,2BACA;AACA;AACA;AACAC;AACA,OAHA,MAGA;AACA;AACAA;AACA;AACA,KATA;AAWAC,WAXA,qBAWA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,KAnBA;AAqBAC,cArBA,wBAqBA;AAAA;;AACA;AACA;AACAC,6DADA;AAEAC;AAFA;AAWAC;AACAC,wBADA;AAEAC;AAAA;AACA;AADA,WAFA;AAKAC;AALA,WAQAC,IARA,CAQA;AAAA;AAAA,SARA,EASAA,IATA,CASA;AACA;AACA;AACAC;AACA;AACA;AACA,aAHA,EAGA,IAHA;AAIA,WANA,MAMA;AACA;AACAA;AACAC;AACAC;AACAC;AACA,aAJA,EAIA,IAJA;AAMA;AACA,SAzBA;AA2BA;AACA;AA9DA;AArBA","names":["name","data","mail","password","affichMdp","messageMdp","numberAffichMsg","validLogin","buttonLogin","regexpBoolMail","regexpBoolPassword","passwordRegExp","emailRegExp","connexionUser","methods","affichMsgConf","document","onEnter","checkLogin","Email","Password","fetch","method","headers","body","then","setTimeout","window","sessionStorage","location"],"sourceRoot":"src/components/Log","sources":["loginPage.vue"],"sourcesContent":["<template>\n<div id=\"table-column\">\n   <div class=\"mb-3\">\n \n     <label for=\"email-login\" id=\"fontText\" class=\"form-label\">{{mail}}</label>\n\n     <div class=\"icoDiv\">\n     <input type=\"email\" class=\"template-login-signup\" id=\"email-login\" @keyup=\"onEnter\" placeholder=\"Groupomania@example.com\">\n     <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test7\" v-show=\"regexpBoolMail === false\" />\n     <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test8\" v-show=\"regexpBoolMail === true\" />\n     </div>\n\n     <label for=\"password-login\" id=\"fontText\" class=\"form-label\">{{password}}</label>\n\n     <div class=\"icoDiv\">\n         <input type=\"password\" class=\"template-login-signup\" @keyup=\"onEnter\" id=\"password-login\"   placeholder=\"Groupomania\">\n         <font-awesome-icon @click=\"affichMsgConf\" icon=\"fa-solid fa-eye-low-vision\" class=\"test8\" />\n         <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test11\" v-show=\"regexpBoolPassword === false\" />\n         <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test10\" v-show=\"regexpBoolPassword === true\" />\n     </div>\n     <input @click=\"checkLogin\" href=\"/espaceUser\" v-show=\"buttonLogin === true\" class=\"button-loginSignup\" id=\"buttonLoginSignup\" type=\"submit\" value=\"Confirmer\">\n      <p class=\"validColor\" v-show=\"validLogin === true\">Connexion Réussie ! </p>\n      <p class=\"errorColor\" v-show=\"validLogin === false\">L'adresse mail ou le mot de passe est incorrect !</p>\n\n   </div>\n\n</div>\n</template>\n\n<script>\nexport default {\n   name:'loginPage',\ndata(){\n    return{\n   mail: 'Adresse email',\n   password:'Mot de passe',\n   affichMdp: 'Aperçu du mot de passe',\n   messageMdp: '',\n   numberAffichMsg: true,\n   validLogin: null,\n   buttonLogin: false,\n\n   regexpBoolMail: null,\n   regexpBoolPassword: null,\n   \n   passwordRegExp : new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})`),\n   emailRegExp : new RegExp (/^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$/i),\n\n   connexionUser : false\n    }\n},\n methods: {\n    affichMsgConf(){\n        if(this.numberAffichMsg === false){\n            this.numberAffichMsg = true;\n             document.getElementById('password-login').setAttribute(\"type\",\"password\");\n        } else {\n            this.numberAffichMsg = false;\n            document.getElementById('password-login').setAttribute(\"type\",\"text\");\n        }\n    },\n\n     onEnter(){\n        let  mailLogin = document.getElementById('email-login');\n        let  passwordLogin = document.getElementById('password-login');\n        if(this.emailRegExp.test(mailLogin.value.trim()) ? this.regexpBoolMail = true : this.regexpBoolMail = false);\n        if(this.passwordRegExp.test(passwordLogin.value.trim()) ? this.regexpBoolPassword = true : this.regexpBoolPassword = false);\n         if( this.regexpBoolMail === true &&  this.regexpBoolPassword === true ){\n             this.buttonLogin = true;\n         }\n     },\n\n    checkLogin(){\n          if( this.regexpBoolMail === true ||  this.regexpBoolPassword === true ){ \n                let loginCheck = {\n          Email: document.querySelector('#email-login').value,\n          Password : document.querySelector('#password-login').value \n            }; \n            \n                \n                \n            \n          \n      \n      \n     fetch('http://localhost:3000/api/auth/login',{\n       method: \"POST\", \n       headers:{  'Accept': 'application/json',\n                  'Content-type': 'application/json'\n     },\n     body: JSON.stringify(loginCheck)\n      })\n     \n      .then(res => res.json())\n      .then(login => {\n        if(login.userId === undefined){\n            this.validLogin = false;\n            setTimeout(() => {\n               this.validLogin = null;\n               return false;\n                 }, 3000)\n        } else {\n              this.validLogin = true;\n            setTimeout(() => {\n                 window.location.assign(`http://localhost:8080/fil`)\n                 sessionStorage.setItem('user', JSON.stringify(login));\n                 location.reload();\n                 }, 2000)\n        \n        }\n      })\n  \n    }\n  }\n}\n}\n</script>\n\n<style>\n#fontText{\n    margin-top: 3%;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.2rem;\n}\n#buttonLoginSignup, #buttonLoginSignup2 {\n    margin-top: 5%;\n    border: 2px solid white;\n    border-radius: 15px / 20px;\n    background-color: #ffffff;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.2rem;\n    padding: 1% 5%;\n    cursor: grab;\n}\n#buttonLoginSignup:hover, #buttonLoginSignup2:hover,.modifButtonUser:hover,.suppButtonUser:hover,.template-login-signup:hover,.updateButtonUser:hover,.buttonUpdateImg:hover,.nav-li:hover,.modifyPostGet:hover,.commPostGet:hover,.modifButtonPostTest:hover{\n    transform: scale(1.10);\n    transition: 1.5s;\n}\n\n#table-column{\n   width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding-top: 10%;\n    margin-bottom: 50px;\n}\n.errorMsg{\n   \n    color: red;\n     font-family: 'Raleway', sans-serif;\n     margin-top: 15px;\n     font-size: 1.5Rem;\n\n}\n.mb-3{\n    color: white;\n    padding-top: 5%;\n    width: 50%;\n    padding-bottom: 5%;\n    \n    \n    border-radius: 15px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-size: 800%;\n    background-image: url('../../assets/background-login.webp');\n}\n.template-login-signup {\n    width: 50%;\n    margin-top: 15px;\n    text-align: center;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.2rem;\n    \n}\n.errorColor{\n    margin-top: 5%;\n    text-align: center;\n    width: 50%;\n    color: orange;\n    font-family: 'Raleway', sans-serif;\n    font-size: 2rem;\n}\n.validColor{\n    margin-top: 5%;\n    text-align: center;\n    width: 50%;\n    color: lightgreen;\n    font-family: 'Raleway', sans-serif;\n    font-size: 2rem;\n}\n.test8{\n    width: 25px;\n    height: 26px;\n    color: green;\n    position: absolute;\n    top: 38%;\n    right: 25%;\n    cursor: grab;\n}\n.test9{\ncursor: grab;\n}\n.test7{\n     width: 30px;\n    height: 26px;\n    color: red;\n    position: absolute;\n    top: 38%;\n    right: 25%;\n}\n.test13{\n    width: 30px;\n    height: 26px;\n    color: red;\n    position: absolute;\n    top: 38%;\n    right: 35%;\n}\n.test12{\n    width: 25px;\n    height: 26px;\n    color: green;\n    position: absolute;\n    top: 38%;\n    right: 35%;\n}\n@media screen and (max-width: 1030px) {\n   .template-login-signup{\n       width: 70%;\n   }\n   .test8.svg-inline--fa.fa-eye-low-vision{\n       right: 15%;\n   }\n}\n@media screen and (max-width: 750px) {\n   .template-login-signup{\n       width: 90%;\n   }\n   .test8.svg-inline--fa.fa-eye-low-vision{\n       right: 6%;\n   }\n}\n@media screen and (max-width: 700px) {\n   .nav-li{\n       margin-bottom: 15%;\n       \n   }\n   .nav-ul-login{\n       width: 20%!important;\n           margin-right: 5%;\n       flex-direction: column;\n   }\n   .mb-3{\n       width: 70%;\n   }\n}\n@media screen and (max-width: 540px) {\n   .nav-li{\n        margin-bottom: 50%!important;\n       \n   }\n   .nav-ul-login{\n       width: 10%!important;\n       margin-right: 5%!important;\n       \n       flex-direction: column;\n   }\n  \n}\n@media screen and (max-width: 430px) {\n .nav-ul-login{\n     margin-right: 10%!important;\n }\n  .mb-3{\n       width: 900%;\n   }\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}