{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.concat.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nvar sessionUser = JSON.parse(sessionStorage.getItem('user'));\nexport default {\n  data: function data() {\n    return {\n      user: '',\n      url: null,\n      alt_text: 'test',\n      post_id: ''\n    };\n  },\n  methods: {\n    onFileChangePost: function onFileChangePost(e) {\n      this.modifImg = true;\n      var file = e.target.files[0];\n      this.url = URL.createObjectURL(file);\n    },\n    PostValid: function PostValid() {\n      var updatePost = {\n        Title: document.querySelector('#inputTitle').value,\n        Content: document.querySelector('#inputText').value,\n        userId: sessionUser.userId\n      };\n      var image = document.getElementById('imgPostUserInput').files[0];\n      var formData = new FormData();\n      formData.append('image', image);\n      axios.post(\"http://localhost:3000/api/post/\", formData, {\n        headers: {\n          'Authorization': 'Bearer ' + sessionUser.token\n        }\n      }).then(function (test) {\n        fetch(\"http://localhost:3000/api/post/\" + test.data._id, {\n          method: \"PUT\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/json',\n            'Authorization': 'Bearer ' + sessionUser.token\n          },\n          body: JSON.stringify(updatePost)\n        }).then(function () {\n          location.reload();\n        }).catch(function (error) {\n          error;\n        });\n      }).catch(function (error) {\n        error;\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    axios.get(\"http://localhost:3000/api/auth/\" + sessionUser.userId, {\n      headers: {\n        'Authorization': 'Bearer ' + sessionUser.token\n      }\n    }).then(function (response) {\n      return _this.user = response.data;\n    }).catch(function (error) {\n      error;\n    });\n    axios.get(\"http://localhost:3000/api/post/\", {\n      headers: {\n        'Authorization': 'Bearer ' + sessionUser.token\n      }\n    }).then(function (response) {\n      var postdata = response.data;\n      postdata.forEach(function (response) {\n        axios.get(\"http://localhost:3000/api/auth/\" + response.userId, {\n          headers: {\n            'Authorization': 'Bearer ' + sessionUser.token\n          }\n        }).then(function (postdataNew) {\n          var userDataNew = postdataNew.data;\n          console.log(userDataNew);\n          var articleCreate = document.createElement('article');\n          articleCreate.className = 'cart__post';\n          articleCreate.dataset.id = response._id;\n          articleCreate.innerHTML = \"\\n                <div class=\\\"cart__nav-div\\\">\\n                    <img class=\\\"imgUserGet\\\"  src=\\\"\".concat(userDataNew.imageUrl, \"\\\" alt=\\\"image de profil\\\">\\n                    <h2 class=\\\"namePostGet\\\">\").concat(userDataNew.Name, \" \").concat(userDataNew.FirstName, \"</h2>\\n                </div>\\n                \\n                <img class=\\\"imgPostGet\\\"  src=\\\"\").concat(response.imageUrl, \"\\\" alt=\\\"image de profil\\\">\\n\\n                <div class=\\\"cart__foot-div\\\">\\n                  <div class=\\\"div-like\\\">\\n                    <a class=\\\"likePostGet\\\">Like  </a>\\n                    <p class=\\\"numberLikePostGet\\\">\").concat(parseInt(response.likes), \"</p>\\n                    <a class=\\\"likePostGet\\\">Dislike  </a>\\n                    <p class=\\\"numberDislikePostGet\\\"> \").concat(parseInt(response.dislikes), \"</p>\\n                    <a class=\\\"affichCommPost\\\">Afficher les commentaires</a>\\n                  </div>\\n                    <h4 class=\\\"titlePostGet\\\">\").concat(response.Title, \"</h4>\\n                    <p class=\\\"contentPostGet\\\">\").concat(response.Content, \"</p>\\n                </div>\\n\\n                 <div class=\\\"cart__com-div\\\">\\n                   <input type=\\\"text\\\" class=\\\"textareaPostGet\\\" placeholder=\\\"Ajouter un commentaire...\\\"></input>\\n                   <a class=\\\"commPostGet\\\" href=\\\"#\\\">Publier</a>\\n                 </div>\");\n          document.getElementById('test2').appendChild(articleCreate);\n        }).catch(function (error) {\n          error;\n        });\n      });\n    }).catch(function (error) {\n      error;\n    });\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AAEA;AAGA;AAEAA,MAFA,kBAEA;AACA;AACAC,cADA;AAEAC,eAFA;AAGAC,sBAHA;AAIAC;AAJA;AAMA,GATA;AAUAC;AACAC,oBADA,4BACAC,CADA,EACA;AACA;AACA;AACA;AACA,KALA;AAMAC,aANA,uBAMA;AAEA;AACAC,0DADA;AAEAC,2DAFA;AAGAC;AAHA;AAMA;AACA;AACAC;AAEAC;AACAC;AACA;AADA;AADA,SAKAC,IALA,CAKA;AAEAC;AACAC,uBADA;AAEAH;AACA,wCADA;AAEA,8CAFA;AAGA;AAHA,WAFA;AAQAI;AARA,WAWAH,IAXA,CAWA;AACAI;AACA,SAbA,EAeAC,KAfA,CAeA;AACAC;AACA,SAjBA;AAiBA,OAxBA,EA0BAD,KA1BA,CA0BA;AACAC;AACA,OA5BA;AA8BA;AAhDA,GAVA;AA6DAC,SA7DA,qBA6DA;AAAA;;AAEAT;AACAC;AACA;AADA;AADA,OAKAC,IALA,CAKA;AAAA;AAAA,KALA,EAMAK,KANA,CAMA;AACAC;AACA,KARA;AAUAR;AACAC;AACA;AADA;AADA,OAKAC,IALA,CAKA;AACA;AACAQ;AAEAV;AACAC;AACA;AADA;AADA,WAKAC,IALA,CAKA;AACA;AACAS;AACA;AACAC;AACAA;AACAA,oJAEAC,oBAFA,wFAGAA,gBAHA,cAGAA,qBAHA,+GAMAC,iBANA,oPAWAC,wBAXA,sIAaAA,2BAbA,2KAgBAD,cAhBA,oEAiBAA,gBAjBA;AAwBAE;AAEA,SArCA,EAsCAT,KAtCA,CAsCA;AACAC;AACA,SAxCA;AAyCA,OA3CA;AA4CA,KAnDA,EAoDAD,KApDA,CAoDA;AACAC;AACA,KAtDA;AAyDA;AAlIA","names":["data","user","url","alt_text","post_id","methods","onFileChangePost","e","PostValid","Title","Content","userId","formData","axios","headers","then","fetch","method","body","location","catch","error","mounted","postdata","console","articleCreate","userDataNew","response","parseInt","document"],"sourceRoot":"src/components/forum","sources":["forumUser.vue"],"sourcesContent":["<template>\n    <div class=\"principalForumDiv\">\n        \n        <div class=\"divImgPost\" v-if=\"url\">\n             <label id=\"fontTextImgPost\" class=\"form-label\" for=\"Img-modifUser\">Image SÃ©lectionner</label>\n            <img class=\"imgPost\" :src=\"url\" />\n        </div>\n\n        <div class=\"borderCreate\">\n\n         <img class=\"imgProfilCreate\" v-if=\"user.imageUrl\"  :src=\"user.imageUrl\" alt=\"\">\n         <img class=\"imgProfilCreate\" v-if=\"!user.imageUrl\" src=\"../../assets/test4.jpeg\" alt=\"image de profil\">\n\n         <div class=\"inputDiv\">\n\n         <input class=\"inputTitle\" id=\"inputTitle\" enctype=\"text/html\" type=\"text\" placeholder=\"Titre du Post\">\n         <textarea resize=\"none\" class=\"inputText\" enctype=\"text/html\" id=\"inputText\" placeholder=\"Contenu du post\"></textarea>\n\n         </div>\n        <input type=\"file\" encType=\"mutipart/form-data\" accept=\".jpg, .png, .gif\" id=\"imgPostUserInput\" @change=\"onFileChangePost\" />\n         <button id=\"imgPostUser\">Ajoutez une image</button>\n         <button @click=\"PostValid\" id=\"postUser\">Poster</button>\n\n    </div>\n     <div id=\"test2\" class=\"mb-5 page2\">  \n\n     </div>\n    \n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nlet sessionUser = JSON.parse(sessionStorage.getItem('user'));\n\n\nexport default {\n\n  data(){\n     return{\n         user: '',\n         url: null,\n         alt_text:'test',\n         post_id: '',\n     }\n    },\n   methods: {\n    onFileChangePost(e){\n      this.modifImg = true;\n      const file = e.target.files[0];\n      this.url = URL.createObjectURL(file);\n    },\n  PostValid(){\n    \n        let updatePost = {\n          Title :document.querySelector('#inputTitle').value,\n          Content :document.querySelector('#inputText').value,\n          userId: sessionUser.userId\n                         };\n\n        let image = document.getElementById('imgPostUserInput').files[0];\n        let  formData = new FormData()\n        formData.append('image', image)\n\n            axios.post(`http://localhost:3000/api/post/`,formData, {\n        headers: {\n           'Authorization':'Bearer ' + sessionUser.token,\n                 },\n        })\n    .then((test) => {\n\n      fetch(`http://localhost:3000/api/post/` + test.data._id,{\n           method: \"PUT\", \n           headers:{  \n                  'Accept': 'application/json',\n                  'Content-type': 'application/json',\n                  'Authorization':'Bearer ' + sessionUser.token,\n     },\n\n           body: JSON.stringify(updatePost),\n\n            })\n           .then(() => {\n                location.reload();\n           })\n\n           .catch((error) => {\n                  error\n            })})\n\n       .catch((error) => {\n           error\n       })\n       \n       }\n     \n  }, \n  mounted () {\n      \n      axios.get(`http://localhost:3000/api/auth/` + sessionUser.userId, {\n        headers: {\n           'Authorization':'Bearer ' + sessionUser.token,\n               },\n        })\n       .then(response => (this.user = response.data))\n       .catch((error) => {\n           error\n       })\n\n        axios.get(`http://localhost:3000/api/post/`, {\n        headers: {\n           'Authorization':'Bearer ' + sessionUser.token,\n               },\n        })\n       .then(response => {\n            let postdata = response.data;\n            postdata.forEach((response) => {\n\n                axios.get(`http://localhost:3000/api/auth/` + response.userId, {\n             headers: {\n           'Authorization':'Bearer ' + sessionUser.token,\n               },\n              })\n              .then(postdataNew => {\n                  let userDataNew = postdataNew.data;\n                  console.log(userDataNew)\n                  let articleCreate = document.createElement('article');\n                articleCreate.className = 'cart__post';\n                articleCreate.dataset.id = response._id;\n                articleCreate.innerHTML = `\n                <div class=\"cart__nav-div\">\n                    <img class=\"imgUserGet\"  src=\"${userDataNew.imageUrl}\" alt=\"image de profil\">\n                    <h2 class=\"namePostGet\">${userDataNew.Name} ${userDataNew.FirstName}</h2>\n                </div>\n                \n                <img class=\"imgPostGet\"  src=\"${response.imageUrl}\" alt=\"image de profil\">\n\n                <div class=\"cart__foot-div\">\n                  <div class=\"div-like\">\n                    <a class=\"likePostGet\">Like  </a>\n                    <p class=\"numberLikePostGet\">${parseInt(response.likes)}</p>\n                    <a class=\"likePostGet\">Dislike  </a>\n                    <p class=\"numberDislikePostGet\"> ${parseInt(response.dislikes)}</p>\n                    <a class=\"affichCommPost\">Afficher les commentaires</a>\n                  </div>\n                    <h4 class=\"titlePostGet\">${response.Title}</h4>\n                    <p class=\"contentPostGet\">${response.Content}</p>\n                </div>\n\n                 <div class=\"cart__com-div\">\n                   <input type=\"text\" class=\"textareaPostGet\" placeholder=\"Ajouter un commentaire...\"></input>\n                   <a class=\"commPostGet\" href=\"#\">Publier</a>\n                 </div>`\n                document.getElementById('test2').appendChild(articleCreate);\n\n              })\n              .catch((error) => {\n                        error\n                                })\n            })\n       })\n       .catch((error) => {\n           error\n       })\n       \n\n  }\n}\n</script>\n\n<style>\n.affichCommPost{\n    color: black;\n    font-size: 1.2rem;\n    right: 2%;\n    cursor: grab;\n    position: absolute;\n\n}\n.numberLikePostGet{\n    font-size: 1.5rem;\n    margin-left: 2%;\n    color: white;\n    padding: 1%;\n    padding-top: 0.5%;\n    padding-bottom: 0.5%;\n    border-radius: 50%;\n    background: green;\n}\n.numberDislikePostGet{\n    font-size: 1.5rem;\n    margin-left: 2%;\n    color: white;\n    padding: 1%;\n    padding-top: 0.5%;\n    padding-bottom: 0.5%;\n    border-radius: 50%;\n    background: red;\n}\n.div-like{\n     padding-top: 3%;\n     display: flex;\n     flex-direction: row;\n     position: relative;\n}\n.likePostGet{\n    color: black;\n    margin-left: 4%;\n    margin-top: 1.3%;\n    font-size: 1.3rem;\n    cursor: grab;\n}\n.fa-solid.fa-heart{\n    font-size: 2rem;\n    background: black;\n}\n.cart__com-div{\n    width: 100%;\n    height: 60px;\n    background: white;\n    border-top: 1px solid grey;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n.commPostGet{\n    color: black;\n    font-size: 1.2rem;\n    padding-left: 1.5%;\n}\n.textareaPostGet{\n    width: 84%;\n    border: 0px;\n    height: 57px;\n    padding-left: 5%;\n    font-size: 1.1rem;\n    font-family: 'Raleway', sans-serif;\n}\n.contentPostGet{\n    font-size: 1.2rem;\n    font-family: 'Raleway', sans-serif;\n    color: black;\n    padding-top: 2%;\n    padding-left: 4%;\n    width: 80%;\n    padding-bottom: 2%;\n\n}\n.cart__foot-div{\n    background: white;\n    height: 100%;\n}\n.titlePostGet{\n    font-size: 2rem;\n    font-family: 'Raleway', sans-serif;\n    color: black;\n    padding-top: 3%;\n    padding-left: 4%;\n}\n.namePostGet{\n    color: black;\n    font-size: 1.2rem;\n    font-family: 'Raleway', sans-serif;\n    font-weight: bold;\n    margin-left: 3%;\n}\n.imgPostGet{\n    border-radius: 0px;\n    width: 100%;\n    height: 400px;\n    object-fit: cover;\n}\n.imgUserGet{\n    border-radius: 50%;\n    width: 6%;\n    height: 40px;\n    object-fit: cover;\n    margin-left: 4%;\n    \n}\n.cart__post{\n    width: 65%;\n    height: 100%;\n    border: 1px solid rgb(168, 153, 153);\n    margin-bottom: 5%;\n}\n\n.cart__nav-div{\n    display: flex;\n    flex-direction: row;\n    background: white;\n    height: 80px;\n    align-items: center;\n}\n.mb-5{\n    color: white;\n    padding-top: 5%;\n    width: 75%;\n    padding-bottom: 5%;\n    margin-top: 3%;\n    border-radius: 15px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-size: 800%;\n    background-image: url('../../assets/background-login.webp');\n}\n.divImgPost{\n    border: 1px solid #00000059;\n    width: 49.8%;\n    background-image: url('../../assets/background-login.webp');\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n#fontTextImgPost{\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.5rem;\n    color: white;\n    padding-top: 5px;\n    text-transform: uppercase;\n}\n.imgPost{\n    width: 90%;\n    height: 175px;\n    object-fit: cover;\n    padding-top: 10px;\n    border-radius: 21px;\n    margin-bottom: 30px;\n}\n#imgPostUser{\n   height: 29.5%;\n   width: 50%;\n   position: absolute;\n   bottom: 0%;\n   left: 0%;\n   border-radius: 15px;\n   border: 0px;\n   background: green;\n   color: white;\n   font-family: 'Raleway', sans-serif;\n   font-size: 1.2rem;\n    border-top-left-radius: 0px;\n    border-top-right-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border: 1px solid #00000059;\n    cursor: grab;\n}\n#imgPostUserInput{\n   height: 29.5%;\n   width: 50%;\n   position: absolute;\n   bottom: 0%;\n   left: 0%;\n   border-radius: 15px;\n   border: 0px;\n   background: green;\n   color: white;\n   font-family: 'Raleway', sans-serif;\n   font-size: 1.2rem;\n    border-top-left-radius: 0px;\n    border-top-right-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border: 1px solid #00000059;\n    cursor: grab;\n    z-index: 1;\n    opacity: 0;\n}\n#postUser{\n   height: 29.5%;\n   width: 50%;\n   position: absolute;\n   bottom: 0%;\n   right: 0%;\n   border-radius: 15px;\n   border: 0px;\n   background: green;\n   color: white;\n   font-family: 'Raleway', sans-serif;\n   font-size: 1.2rem;\n   border-top-left-radius: 0px;\n   border-top-right-radius: 0px;\n   border-bottom-left-radius: 0px;\n   border: 1px solid #00000059;\n   cursor: grab;\n}\n.borderCreate{\n    margin-top: 3%;\n    width: 50%;\n    height: 170px;\n    background-image: url('../../assets/background-login.webp');\n    border-radius: 15px;\n    display: flex;\n    position: relative;\n    flex-direction: row;\n    font-family: 'Raleway', sans-serif;\n     \n}\n\n.imgProfilCreate{\n    object-fit: cover;\n    height: 69.5%;\n    padding-top: 0.5px;\n    border-radius: 0px;\n    object-fit: cover;\n    border-top-left-radius: 15px;\n    border-right: 1px solid #00000059;\n}\n.inputText{\n    width: 100%;\n    height: 67%;\n    border: 0px;\n    border-top: 1px solid #00000059;\n    border-right: 1px solid #00000059;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1rem;\n    resize:none\n\n}\n.inputTitle{\n    width: 65.2%;\n    height: 25%;\n    border: 0px;\n    border-top: 1px solid #00000059;\n    border-right: 1px solid #00000059;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.7rem;\n    border-top-right-radius: 15px;\n    padding-left: 30%;\n}\n.principalForumDiv{\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n.inputDiv{\n    width: 82.3%;\n    height: 70%;\n}\n</style>"]},"metadata":{},"sourceType":"module"}