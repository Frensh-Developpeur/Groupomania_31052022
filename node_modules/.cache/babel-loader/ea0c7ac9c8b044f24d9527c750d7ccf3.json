{"ast":null,"code":"import \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.string.trim.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nvar sessionUser = JSON.parse(sessionStorage.getItem('user'));\nexport default {\n  name: 'espace-user',\n  data: function data() {\n    return {\n      user: '',\n      modifUser: false,\n      userId: sessionUser.userId,\n      tokenUser: sessionUser.token,\n      url: null,\n      modifImg: false,\n      boolAffichMsg: false,\n      regexpBoolName: null,\n      regexpBoolFirstName: null,\n      regexpBoolAdress: null,\n      regexpBoolCity: null,\n      regexpBoolPassword: null,\n      firstNameRegExp: new RegExp(\"^[a-zA-Z\\xE0\\xE2\\xE4\\xE9\\xE8\\xEA\\xEB\\xEF\\xEE\\xF4\\xF6\\xF9\\xFB\\xFC\\xE7\\xB0 -]{1,}$\"),\n      passwordRegExp: new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})\"),\n      lastNameRegExp: new RegExp(\"^[a-zA-Z\\xE0\\xE2\\xE4\\xE9\\xE8\\xEA\\xEB\\xEF\\xEE\\xF4\\xF6\\xF9\\xFB\\xFC\\xE7\\xB0 -]{1,}$\"),\n      regexAddress: new RegExp(/^[a-zA-Z0-9 ]+$/),\n      cityRegExp: new RegExp(\"^[a-zA-Z\\xE0\\xE2\\xE4\\xE9\\xE8\\xEA\\xEB\\xEF\\xEE\\xF4\\xF6\\xF9\\xFB\\xFC\\xE7\\xB0 -]{1,}$\")\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    axios.get(\"http://localhost:3000/api/auth/\" + this.userId, {\n      headers: {\n        'Authorization': 'Bearer ' + sessionUser.token\n      }\n    }).then(function (response) {\n      return _this.user = response.data;\n    }).catch(function (error) {\n      error;\n      sessionStorage.clear();\n      location.reload();\n      window.location.assign(\"http://localhost:8080/\");\n    });\n  },\n  methods: {\n    UserValid: function UserValid() {\n      var formData = new FormData();\n      var file = document.querySelector('#Img-modifUser');\n      formData.append('file', file);\n      var updateUser = {\n        Name: document.querySelector('#Nom-modifUser').value,\n        FirstName: document.querySelector('#FirstName-modifUser').value,\n        Password: document.querySelector('#Password-modifUser').value,\n        City: document.querySelector('#City-modifUser').value,\n        Adress: document.querySelector('#Adress-modifUser').value,\n        imageUrl: formData\n      };\n      fetch('http://localhost:3000/api/auth/' + this.userId, {\n        method: \"PUT\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json',\n          'Authorization': 'Bearer ' + sessionUser.token\n        },\n        body: JSON.stringify(updateUser)\n      }).then(function (modify) {\n        return modify;\n      }).catch(function (error) {\n        error;\n      });\n    },\n    onEnter: function onEnter() {\n      var nameSignup = document.getElementById('Nom-modifUser');\n      var firstNameSignup = document.getElementById('FirstName-modifUser');\n      var adressSignup = document.getElementById('Adress-modifUser');\n      var citySignup = document.getElementById('City-modifUser');\n      var mailSignup = document.getElementById('Email-modifUser');\n      var passwordSignup = document.getElementById('Password-modifUser');\n      if (this.lastNameRegExp.test(nameSignup.value.trim()) ? this.regexpBoolName = true : this.regexpBoolName = false) ;\n      if (this.firstNameRegExp.test(firstNameSignup.value.trim()) ? this.regexpBoolFirstName = true : this.regexpBoolFirstName = false) ;\n      if (this.regexAddress.test(adressSignup.value.trim()) ? this.regexpBoolAdress = true : this.regexpBoolAdress = false) ;\n      if (this.cityRegExp.test(citySignup.value.trim()) ? this.regexpBoolCity = true : this.regexpBoolCity = false) ;\n      if (this.emailRegExp.test(mailSignup.value.trim()) ? this.regexpBoolMail = true : this.regexpBoolMail = false) ;\n      if (this.passwordRegExp.test(passwordSignup.value.trim()) ? this.regexpBoolPassword = true : this.regexpBoolPassword = false) ;\n      this.regexpBoolName = this.lastNameRegExp.test(nameSignup.value.trim()) ? true : false;\n    },\n    affichMsgConf: function affichMsgConf() {\n      if (this.numberAffichMsg === false) {\n        this.numberAffichMsg = true;\n        document.getElementById('Password-modifUser').setAttribute(\"type\", \"password\");\n      } else {\n        this.numberAffichMsg = false;\n        document.getElementById('Password-modifUser').setAttribute(\"type\", \"text\");\n      }\n    },\n    onFileChange: function onFileChange(e) {\n      this.modifImg = true;\n      var file = e.target.files[0];\n      this.url = new FormData(file);\n    },\n    updateUser: function updateUser() {\n      this.modifUser = true;\n    },\n    suppUser: function suppUser() {\n      var suppConfirm = confirm(\"Voulez-vous supprimez votre compte ?\");\n\n      if (suppConfirm === true) {\n        axios.delete(\"http://localhost:3000/api/auth/\" + this.userId, {\n          headers: {\n            'Authorization': 'Bearer ' + sessionUser.token,\n            'userId': sessionUser.userId\n          }\n        }).then(function (response) {\n          return response;\n        });\n        sessionStorage.clear();\n        location.reload();\n        window.location.assign(\"http://localhost:8080/\");\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AAEA;AACAA,qBADA;AAGAC,MAHA,kBAGA;AACA;AACAC,cADA;AAEAC,sBAFA;AAGAC,gCAHA;AAIAC,kCAJA;AAKAC,eALA;AAMAC,qBANA;AAOAC,0BAPA;AAQAC,0BARA;AASAC,+BATA;AAUAC,4BAVA;AAWAC,0BAXA;AAYAC,8BAZA;AAcAC,qHAdA;AAeAC,+FAfA;AAgBAC,oHAhBA;AAiBAC,iDAjBA;AAkBAC;AAlBA;AAoBA,GAxBA;AAyBAC,SAzBA,qBAyBA;AAAA;;AAEAC;AACAC;AACA;AADA;AADA,OAKAC,IALA,CAKA;AAAA;AAAA,KALA,EAMAC,KANA,CAMA;AACAC;AACAC;AACAC;AACAC;AACA,KAXA;AAYA,GAvCA;AAyCAC;AACAC,aADA,uBACA;AACA;AACA;AACAC;AAEA;AACAC,4DADA;AAEAC,uEAFA;AAGAC,qEAHA;AAIAC,6DAJA;AAKAC,iEALA;AAMAC;AANA;AAWAC;AACAC,qBADA;AAEAjB;AAAA;AACA,4CADA;AAEA;AAFA,SAFA;AAMAkB;AANA,SAQAjB,IARA,CAQA;AAAA;AAAA,OARA,EASAC,KATA,CASA;AACAC;AACA,OAXA;AAYA,KA7BA;AA8BAgB,WA9BA,qBA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7CA;AA+CAC,iBA/CA,2BA+CA;AACA;AACA;AACAC;AACA,OAHA,MAGA;AACA;AACAA;AACA;AACA,KAvDA;AAwDAC,gBAxDA,wBAwDAC,CAxDA,EAwDA;AACA;AACA;AACA;AACA,KA5DA;AA8DAC,cA9DA,wBA8DA;AACA;AACA,KAhEA;AAkEAC,YAlEA,sBAkEA;AACA;;AACA;AACA1B,cACA2B,MADA,CACA,+CADA,EACA;AACA1B;AACA,0DADA;AAEA;AAFA;AADA,SADA,EAOAC,IAPA,CAOA;AAAA;AAAA,SAPA;AAQAG;AACAC;AACAC;AACA;AACA;AAjFA;AAzCA","names":["name","data","user","modifUser","userId","tokenUser","url","modifImg","boolAffichMsg","regexpBoolName","regexpBoolFirstName","regexpBoolAdress","regexpBoolCity","regexpBoolPassword","firstNameRegExp","passwordRegExp","lastNameRegExp","regexAddress","cityRegExp","mounted","axios","headers","then","catch","error","sessionStorage","location","window","methods","UserValid","formData","Name","FirstName","Password","City","Adress","imageUrl","fetch","method","body","onEnter","affichMsgConf","document","onFileChange","e","updateUser","suppUser","delete"],"sourceRoot":"src/components/forum","sources":["espaceUser.vue"],"sourcesContent":["<template>\n    <div id=\"table-column\">\n        <div  v-show=\"modifUser === false\" class=\"mb-3 page2\">  \n          <img class=\"imgUser\"  :src=\"user.imageUrl\" alt=\"image de profil\">\n          <h1 class=\"nameUser\" >{{user.FirstName}} {{user.Name}}</h1>\n          <p class=\"paramsUser\">Adresse mail : {{user.Email}}</p>\n          <p class=\"paramsUser\">Date de naissance : {{user.Birthday}}</p>\n          <p class=\"paramsUser\">Ville : {{user.City}}</p>\n          <p class=\"paramsUser\">Adresse: {{user.Adress}}</p>\n          <div v-show=\"modifUser === false\" class=\"buttonUser\">\n              <button @click=\"updateUser\" class=\"modifButtonUser\">Modifier</button>\n              <button @click=\"suppUser\" class=\"suppButtonUser\">Supprimer mon compte</button>\n          </div>\n          </div>\n\n\n\n          \n           <div v-show=\"modifUser === true\" class=\"mb-3 page2\"> \n\n         <img class=\"imgUser\"  v-if=\"modifImg === false\" :src=\"user.imageUrl\" />\n         <img class=\"imgUserUpdate\"   v-if=\"url\" :src=\"url\" />\n\n\n         <label id=\"fontTextImg\" class=\"form-label\" for=\"Img-modifUser\">Sélectionner une image de profil </label>\n\n         <div class=\"icoDiv\">\n           <input type=\"file\" class=\"template-login-signup\" encType=\"mutipart/form-data\" accept=\".jpg, .png, .gif\" id=\"Img-modifUser\" @change=\"onFileChange\" />\n           <p class=\"buttonUpdateImg\">Modifier l'image</p>\n        </div>      \n                    \n        <label for=\"Name-modifUser\" id=\"fontText\" class=\"form-label\">Nom</label>\n\n        <div class=\"icoDiv\">\n         <input type=\"text\" v-on:keyup=\"onEnter\" class=\"template-login-signup\" id=\"Nom-modifUser\"  placeholder=\"Ramtohul\">\n\n            <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test7\" v-show=\"regexpBoolName === false\" />\n            <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test8\" v-show=\"regexpBoolName === true\" />\n\n        </div>\n\n        <label for=\"FirstName-modifUser\" id=\"fontText\" class=\"form-label\">Prénom</label>\n\n        <div class=\"icoDiv\">\n         <input type=\"text\" v-on:keyup=\"onEnter\" class=\"template-login-signup\" id=\"FirstName-modifUser\"  placeholder=\"Franck\">  \n\n           <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test7\" v-show=\"regexpBoolFirstName === false\" />\n           <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test8\" v-show=\"regexpBoolFirstName === true\" />\n\n        </div>\n\n         <label for=\"City-modifUser\" id=\"fontText\"  class=\"form-label\">Ville</label>\n\n        <div class=\"icoDiv\">\n         <input type=\"text\" v-on:keyup=\"onEnter\" class=\"template-login-signup\" id=\"City-modifUser\"  placeholder=\"Dijon\">  \n\n           <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test7\" v-show=\"regexpBoolCity === false\" />\n           <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test8\" v-show=\"regexpBoolCity === true\" />\n\n        </div>\n\n        <label for=\"Adress-modifUser\" id=\"fontText\" class=\"form-label\">Adresse</label>\n\n        <div class=\"icoDiv\">\n         <input type=\"text\" v-on:keyup=\"onEnter\" class=\"template-login-signup\" id=\"Adress-modifUser\"  placeholder=\"32 rue de Dijon\"> \n\n          <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test7\" v-show=\"regexpBoolAdress === false\" />\n          <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test8\" v-show=\"regexpBoolAdress === true\" />\n\n        </div>\n\n        <label for=\"Password-modifUser\" id=\"fontText\" class=\"form-label\">Mot de passe</label>\n\n        <div class=\"icoDiv\">\n         <input type=\"password\" v-on:keyup=\"onEnter\" class=\"template-login-signup\" id=\"Password-modifUser\"  placeholder=\"Group&1mania\">  \n         <font-awesome-icon @click=\"affichMsgConf\" icon=\"fa-solid fa-eye-low-vision\" class=\"test8 test9\" />\n         <font-awesome-icon icon=\"fa-solid fa-triangle-exclamation\" class=\"test11\" v-show=\"regexpBoolPassword === false\" />\n         <font-awesome-icon icon=\"fa-solid fa-check\" class=\"test10\" v-show=\"regexpBoolPassword === true\" />\n        </div>\n\n          <div v-show=\"modifUser === true\" class=\"buttonUserUpdate\">\n              <button @click=\"UserValid\" class=\"updateButtonUser\">Confirmer</button>\n          </div>\n          </div>\n\n    </div>\n</template>\n\n<script>\n\n\nimport axios from 'axios';\nlet sessionUser = JSON.parse(sessionStorage.getItem('user'));\n\nexport default {   \n   name: 'espace-user',\n   \n   data(){\n       return{\n           user : '',\n           modifUser: false,\n           userId: sessionUser.userId,\n           tokenUser: sessionUser.token,\n           url: null,\n           modifImg: false,\n           boolAffichMsg: false,\n           regexpBoolName: null, \n           regexpBoolFirstName: null,\n           regexpBoolAdress: null,\n           regexpBoolCity: null,\n           regexpBoolPassword: null,\n        \n        firstNameRegExp : new RegExp(`^[a-zA-Zàâäéèêëïîôöùûüç° -]{1,}$`),\n        passwordRegExp : new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})`),\n        lastNameRegExp : new RegExp(`^[a-zA-Zàâäéèêëïîôöùûüç° -]{1,}$`),\n        regexAddress : new RegExp(/^[a-zA-Z0-9 ]+$/),\n        cityRegExp : new RegExp(`^[a-zA-Zàâäéèêëïîôöùûüç° -]{1,}$`),\n       }\n   },\n   mounted () {\n        \n        axios.get(`http://localhost:3000/api/auth/` + this.userId, {\n        headers: {\n           'Authorization':'Bearer ' + sessionUser.token,\n               },\n        })\n       .then(response => (this.user = response.data))\n       .catch((error) => {\n           error\n           sessionStorage.clear();\n           location.reload();\n           window.location.assign(`http://localhost:8080/`)\n       })\n    },\n\n   methods:{\n        UserValid(){\n           let formData = new FormData();\n           let file = document.querySelector('#Img-modifUser');\n           formData.append('file', file);\n\n      let updateUser = {\n          Name :document.querySelector('#Nom-modifUser').value,\n          FirstName :document.querySelector('#FirstName-modifUser').value,\n          Password : document.querySelector('#Password-modifUser').value,\n          City : document.querySelector('#City-modifUser').value,\n          Adress : document.querySelector('#Adress-modifUser').value,\n          imageUrl: formData\n\n      };\n     \n    \n      fetch('http://localhost:3000/api/auth/' + this.userId,{\n       method: \"PUT\", \n       headers:{  'Accept': 'application/json',\n                  'Content-type': 'application/json',\n                  'Authorization':'Bearer ' + sessionUser.token,\n     },\n     body: JSON.stringify(updateUser),\n      })\n       .then(modify => modify)\n       .catch((error) => {\n           error\n       })\n    },\n           onEnter(){\n        let  nameSignup = document.getElementById('Nom-modifUser');\n        let  firstNameSignup = document.getElementById('FirstName-modifUser');\n        let  adressSignup = document.getElementById('Adress-modifUser');\n        let  citySignup = document.getElementById('City-modifUser');\n        let  mailSignup = document.getElementById('Email-modifUser');\n        let  passwordSignup = document.getElementById('Password-modifUser');\n\n        if(this.lastNameRegExp.test(nameSignup.value.trim()) ? this.regexpBoolName = true : this.regexpBoolName = false);\n        if(this.firstNameRegExp.test(firstNameSignup.value.trim()) ? this.regexpBoolFirstName = true : this.regexpBoolFirstName = false);\n        if(this.regexAddress.test(adressSignup.value.trim()) ? this.regexpBoolAdress = true : this.regexpBoolAdress = false);\n        if(this.cityRegExp.test(citySignup.value.trim()) ? this.regexpBoolCity = true : this.regexpBoolCity = false);\n        if(this.emailRegExp.test(mailSignup.value.trim()) ? this.regexpBoolMail = true : this.regexpBoolMail = false);\n        if(this.passwordRegExp.test(passwordSignup.value.trim()) ? this.regexpBoolPassword = true : this.regexpBoolPassword = false);\n         this.regexpBoolName = (this.lastNameRegExp.test(nameSignup.value.trim()) ? true : false);\n    },\n\n    affichMsgConf(){\n        if(this.numberAffichMsg === false){\n            this.numberAffichMsg = true;\n             document.getElementById('Password-modifUser').setAttribute(\"type\",\"password\");\n        } else {\n            this.numberAffichMsg = false;\n            document.getElementById('Password-modifUser').setAttribute(\"type\",\"text\");\n        }\n    },\n     onFileChange(e) {\n      this.modifImg = true;\n      const file = e.target.files[0];\n      this.url = new FormData(file);\n     },\n\n       updateUser(){\n         this.modifUser = true;\n       },\n\n       suppUser(){\n         let suppConfirm = confirm(\"Voulez-vous supprimez votre compte ?\")\n         if(suppConfirm === true ){\n              axios\n          .delete(`http://localhost:3000/api/auth/` + this.userId,{\n              headers: {\n           'Authorization':'Bearer ' + sessionUser.token,\n           'userId': sessionUser.userId,\n               },\n          })\n          .then(response => response)\n          sessionStorage.clear();\n          location.reload();\n          window.location.assign(`http://localhost:8080/`)\n         }\n       }\n   }\n   \n}\n\n\n</script>\n\n\n<style>\n.test8{\n    width: 25px;\n    height: 26px;\n    color: green;\n    position: absolute;\n    top: 38%;\n    right: 25%;\n}\n.test9{\ncursor: grab;\n}\n.test7{\n     width: 30px;\n    height: 26px;\n    color: red;\n    position: absolute;\n    top: 38%;\n    right: 25%;\n}\n.test11{\n       width: 30px;\n    height: 26px;\n    color: red;\n    position: absolute;\n    top: 38%;\n    right: 29%;\n}\n.test10{\n     width: 25px;\n    height: 26px;\n    color: green;\n    position: absolute;\n    top: 38%;\n    right: 29%;\n}\n.buttonUpdateImg{\n    color: white;\n    border-radius: 15px / 15px;\n    background: green;\n    position: absolute;\n    width: 49%;\n    height: 100%;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.5rem;\n    display: flex;\n    align-content: center;\n    align-items: center;\n    justify-content: center;\n    \n}\n\n#Img-modifUser{\n    z-index: 1;\n    opacity: 0;\n    padding-top: 15px;\n    margin-top: 5px;\n    cursor: grab;\n}\n#fontTextImg{\n    margin-top: 3%;\n    font-family: 'Raleway', sans-serif;\n    font-size: 1.2rem;\n    margin-bottom: 10px;\n    margin-top: 20px;\n    object-fit: cover;\n}\n.page2{\n    font-family: 'Raleway', sans-serif;\n}\n.imgUser{\n    width: 30%;\n}\n.imgUserUpdate{\n    width: 30%;\n    height: 200px;\n}\n.nameUser{\n    text-transform: uppercase;\n    font-size: 2rem;\n    margin-bottom: 4%;\n    margin-top: 5%;\n}\n\n.paramsUser{\n    font-size: 1.1rem;\n    margin-bottom: 3%;\n}\n.buttonUser{\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n}\n.modifButtonUser{\n    padding: 10%;\n    color: white;\n    background: green;\n    border: 0px;\n    cursor: grab;\n    border-radius: 15px / 15px;\n    font-size: 1rem;\n    margin-bottom: 5%;\n    font-family: 'Raleway', sans-serif;\n}\n.buttonUserUpdate{\n    width: 100%;\n    text-align: center;\n}\n.updateButtonUser{\n   color: white;\n    background: green;\n    border: 0px;\n    cursor: grab;\n    border-radius: 15px / 15px;\n    font-size: 1.2rem;\n    margin-bottom: 5%;\n    font-family: 'Raleway', sans-serif;\n    margin-top: 20px;\n    padding-left: 20%;\n    padding-right: 20%;\n    padding-top: 1.5%;\n    padding-bottom: 1.5%;\n}\n.suppButtonUser{\n    padding: 5%;\n    color: white;\n    background: red;\n    border: 0px;\n    cursor: grab;\n    border-radius: 15px / 15px;\n     font-size: 1rem;\n    font-family: 'Raleway', sans-serif;\n}\n</style>"]},"metadata":{},"sourceType":"module"}